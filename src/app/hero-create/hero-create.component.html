<div class="form-container data-bg">
  <form (ngSubmit)="onSubmit()" #heroForm="ngForm">
    <h2 class="text-center">Character Overview</h2>

    <!-- Name, Role, Difficulty -->
    <div class="grid-container">
      <div class="grid-item">
        <mat-form-field appearance="outline" class="hit-input-item">
          <mat-label>Hero Name</mat-label>
          <input matInput name="heroName"
                placeholder="Hero Name"
                [(ngModel)]="currentHero.heroName"
                minlength="3"
                required
                #heroName="ngModel">
        </mat-form-field>
        <!-- <mat-error [style.display]="(heroName.valid || heroName.pristine) ? 'none' : 'block'">
          Name is required
        </mat-error> -->
      </div>
      <div class="grid-item">
        <mat-form-field appearance="outline" class="hit-input-item">
          <mat-label>Hero Age</mat-label>
          <input matInput name="heroAge"
                type="number"
                placeholder="0"
                [(ngModel)]="currentHero.age"
                minimum="0"
                required
                #heroAge="ngModel">
        </mat-form-field>
        <!-- <mat-error [style.display]="(heroAge.value > 0 && heroAge.touched) ? 'none' : 'block'">
          Age is required
        </mat-error> -->
      </div>
    </div>
    <div class="grid-container">
      <div class="grid-item">
        <mat-form-field appearance="outline" class="hit-input-item">
          <mat-label>Hero Role</mat-label>
          <mat-select placeholder="Role"
                      name="role"
                      [(ngModel)]="currentHero.role"
                      required>
            <mat-option *ngFor="let role of roles" [value]="role">
              {{role}}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div class="grid-item">
        <mat-form-field appearance="outline" class="hit-input-item">
          <mat-label>Hero Difficulty</mat-label>
          <mat-select placeholder="Difficulty"
                      name="difficulty"
                      [(ngModel)]="currentHero.difficulty"
                      required>
            <mat-option *ngFor="let difficulty of difficulties" [value]="difficulty.value" >
              {{difficulty.text}}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </div>

    <!-- Description text area -->
    <div class="grid-container">
      <div class="grid-item">
        <mat-form-field appearance="outline" class="hit-input-item">
          <mat-label>Hero Description</mat-label>
          <textarea
            #description
            id="description"
            name="description"
            matInput
            placeholder="Hero Description"
            [(ngModel)]="currentHero.heroDetailDescription"
            (keyup)="resize($event)"
            minlength="3"
            required></textarea>
        </mat-form-field>
      </div>
    </div>

    <!-- Hero design image -->
    <div class="grid-container">
      <div class="grid-item">
        <mat-form-field appearance="outline" class="hit-input-item">
          <mat-label>Hero Design</mat-label>
          <input matInput
                name="heroDesign"
                placeholder="Hero Design"
                [(ngModel)]="currentHero.design"
                minlength="3"
                required
                #heroDesign="ngModel">
        </mat-form-field>
      </div>
    </div>

    <!-- character story area -->
    <h2 class="text-center">Character Story</h2>
    <div class="grid-container">
      <div class="grid-item">
        <mat-form-field appearance="outline" class="hit-input-item">
            <mat-label>Real Name</mat-label>
          <input matInput name="realName"
                placeholder="Real Name"
                [(ngModel)]="currentHero.realName"
                minlength="3"
                required>
        </mat-form-field>
      </div>
      <div class="grid-item">
        <mat-form-field appearance="outline" class="hit-input-item">
            <mat-label>Occupation</mat-label>
          <input matInput name="occupation"
                placeholder="Occupation"
                [(ngModel)]="currentHero.occupation"
                minlength="3"
                required>
        </mat-form-field>
      </div>
      <div class="grid-item">
        <mat-form-field appearance="outline" class="hit-input-item">
            <mat-label>Affiliation</mat-label>
          <input matInput name="affiliation"
                placeholder="Affiliation"
                [(ngModel)]="currentHero.affiliation"
                minlength="3"
                required>
        </mat-form-field>
      </div>
    </div>
    <div class="grid-container">
      <div class="grid-item">
        <mat-form-field appearance="outline" class="hit-input-item">
            <mat-label>Base of Operations</mat-label>
          <input matInput name="baseOfOperations"
                 placeholder="Base of Operations"
                 [(ngModel)]="currentHero.baseOfOperations"
                 minlength="3"
                 required>
        </mat-form-field>
      </div>
      <div class="grid-item">
        <mat-form-field appearance="outline" class="hit-input-item">
            <mat-label>Hero Quote</mat-label>
          <input matInput name="heroQuote"
                placeholder="Hero Quote"
                [(ngModel)]="currentHero.heroQuote"
                minlength="3"
                required>
        </mat-form-field>
      </div>
    </div>
    <div class="grid-container">
      <div class="grid-item">
        <mat-form-field appearance="outline" class="hit-input-item">
          <mat-label>Hero Backstory</mat-label>
          <textarea
            #backstory
            id="backstory"
            name="backstory"
            matInput
            placeholder="Hero Backstory"
            [(ngModel)]="currentHero.heroBackstory"
            (keyup)="resize($event)"
            minlength="3"
            required></textarea>
        </mat-form-field>
      </div>
    </div>


    <!-- Ability form area -->
    <h2 class="text-center">Character Abilities</h2>
    <div class="grid-container">
      <div class="grid-item">
          <mat-form-field appearance="outline" class="hit-input-item">
              <mat-label>Ability Name</mat-label>
              <input style="width: 100%; padding-left: 10px; text-align: left;"
                    matInput name="abilityName"
                    placeholder="Ability Name"
                    [(ngModel)]="currentAbility.name">
            </mat-form-field>
      </div>
      <div class="grid-item">
          <mat-form-field appearance="outline" class="hit-input-item">
              <mat-label>Ability Icon URL</mat-label>
              <input style="width: 100%; padding-left: 10px; text-align: left;"
                    type="url"
                    matInput name="abilityIcon"
                    placeholder="https://example.com/imgs/icon.png"
                    pattern="https://.*"
                    [(ngModel)]="currentAbility.icon">
            </mat-form-field>
      </div>
    </div>
    <div class="grid-container">
      <div class="grid-item">
          <mat-form-field appearance="outline" class="hit-input-item">
              <mat-label>Ability Description</mat-label>
              <textarea
                name="abilityDescription"
                style="width: 100%; padding-left: 10px; text-align: left;"
                matInput
                placeholder="Description"
                [(ngModel)]="currentAbility.description"></textarea>
            </mat-form-field>
            <!-- Add Remove buttons -->
      <div style="width:100%; margin-bottom: 10px;">
        <button mat-raised-button
                style="float:right;"
                (click)="addAbility()"
                color="primary"
                [disabled]="!currentAbility.name ||
                            !currentAbility.icon ||
                            !currentAbility.description">+ Add Hero Ability</button>
        </div>
      </div>
    </div>






    <!-- List of added abilities -->
    <div class="ability-grid-container"
          *ngFor="let ability of currentHero.abilities; let i = index"
          style="margin-bottom:5px;">
      <div class="ability-grid-icon" style="background-color: #3c3c3c">
        <img class="hit-ability-icon mat-list-icon"
              src="{{ability.icon}}"
              alt="{{ability.name}}"
              (error)="badImage($event)">
      </div>
      <div class="ability-grid-card" style="text-align: left; width:100%;">
        <mat-card>
          <mat-card-header>
            <mat-card-title><b>{{ability.name}}</b></mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <p>{{ability.description}}
            </p>
          </mat-card-content>
          <mat-card-actions>
            <button mat-button color="warn" (click)="removeCard(i)">Remove</button>
            <button mat-button color="primary"
                    [disabled]="currentAbility.name !== '' ||
                                currentAbility.icon !== '' ||
                                currentAbility.description !== '' "
                    (click)="editCard(i)">Edit</button>
          </mat-card-actions>
        </mat-card>
      </div>
    </div>

    <!-- <mat-icon class="star">star</mat-icon> -->
    <!-- <mat-icon class="empty_star">star_border</mat-icon> -->
    <div class="grid-container">
      <div class="grid-item">
        <mat-error
          [style.display]=
            "(!currentHero.abilities ||
              currentHero.abilities.length === 0) ? 'block' : 'none'">
              Hero needs an ability
        </mat-error>
      </div>
    </div>
    <div class="grid-container">
      <div class="grid-item">
        <button type="submit"
        class="submit"
        mat-raised-button
        style="float:right;"
        (click)="saveHero()"
        [disabled]="!heroForm.form.valid ||
                    !currentHero.abilities ||
                    currentHero.abilities.length === 0">Save Hero</button>
      </div>
    </div>

  </form>
</div>

